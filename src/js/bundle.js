(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SceneManager=exports.Scene=exports.EventHandler=exports.EventEmitter=exports.AudioManager=exports.AssetLoader=exports.AnimationManager=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _AnimationManager=require("./modules/AnimationManager");Object.defineProperty(exports,"AnimationManager",{enumerable:true,get:function get(){return _interopRequireDefault(_AnimationManager).default}});var _AssetLoader=require("./modules/AssetLoader");Object.defineProperty(exports,"AssetLoader",{enumerable:true,get:function get(){return _interopRequireDefault(_AssetLoader).default}});var _AudioManager=require("./modules/AudioManager");Object.defineProperty(exports,"AudioManager",{enumerable:true,get:function get(){return _interopRequireDefault(_AudioManager).default}});var _EventEmitter=require("./modules/EventEmitter");Object.defineProperty(exports,"EventEmitter",{enumerable:true,get:function get(){return _interopRequireDefault(_EventEmitter).default}});var _EventHandler=require("./modules/EventHandler");Object.defineProperty(exports,"EventHandler",{enumerable:true,get:function get(){return _interopRequireDefault(_EventHandler).default}});var _Scene=require("./modules/Scene");Object.defineProperty(exports,"Scene",{enumerable:true,get:function get(){return _interopRequireDefault(_Scene).default}});var _SceneManager=require("./modules/SceneManager");Object.defineProperty(exports,"SceneManager",{enumerable:true,get:function get(){return _interopRequireDefault(_SceneManager).default}});var _Utils=require("./modules/Utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AG2D=function(){function AG2D(){_classCallCheck(this,AG2D);this.hasInitialised=false;this.setUpHooks()}_createClass(AG2D,[{key:"init",value:function init(){var canvas=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.createElement("CANVAS");if(canvas.tagName.toLowerCase()!=="canvas"){throw new Error(canvas+" is not a canvas element")}this.canvas=canvas;this.context=this.canvas.getContext("2d");this.isRunning=false;this.interval=1e3/60;this.size={height:this.canvas.getBoundingClientRect().height,width:this.canvas.getBoundingClientRect().width};this.bounds={height:this.canvas.getBoundingClientRect().height,width:this.canvas.getBoundingClientRect().width};this.resizeCanvas(this.bounds.width,this.bounds.height);this.hasInitialised=true}},{key:"clearCanvas",value:function clearCanvas(){this.context.clearRect(0,0,this.size.width,this.size.height);if(this.backgroundColour!=="transparent"){this.context.fillStyle=this.backgroundColour;this.context.fillRect(0,0,this.size.width,this.size.height)}}},{key:"configure",value:function configure(options){if(!this.hasInitialised){this.init(options.canvas)}this.fps=options.fps;this.interval=1e3/this.fps;this.backgroundColour=options.backgroundColour||"transparent";if(options.size){this.size={height:options.size.height,width:options.size.width};this.bounds={height:options.size.height,width:options.size.width};this.resizeCanvas(this.bounds.width,this.bounds.height)}}},{key:"render",value:function render(){this.context.save();this.context.scale(window.devicePixelRatio*this.ratio,window.devicePixelRatio*this.ratio);this.clearCanvas();this.hooks.render();this.context.restore();this.lastRender=window.performance.now()}},{key:"renderLoop",value:function renderLoop(){if(this.isRunning){window.requestAnimationFrame(this.renderLoop.bind(this))}var timeNow=window.performance.now();var updateDeltaTime=timeNow-this.lastUpdate;var renderDeltaTime=timeNow-this.lastRender;this.update(updateDeltaTime);if(renderDeltaTime>this.interval){this.render()}}},{key:"setUpHooks",value:function setUpHooks(){var _this=this;this.hooks={update:_Utils.noOp,render:_Utils.noOp,stop:_Utils.noOp,start:_Utils.noOp,bind:function bind(name,func){_this.hooks[name]=func},unbind:function unbind(name){delete _this.hooks[name]}}}},{key:"start",value:function start(){this.isRunning=true;var now=window.performance.now();this.lastUpdate=now;this.lastRender=now;this.hooks.start();this.renderLoop()}},{key:"stop",value:function stop(){this.isRunning=false;this.hooks.stop()}},{key:"update",value:function update(deltaTime){this.hooks.update(deltaTime);this.lastUpdate=window.performance.now()}},{key:"resizeCanvas",value:function resizeCanvas(width,height){var ratio=this.size.width/this.size.height;var destRatio=width/height;var destWidth=width;var destHeight=height;if(destRatio>ratio){destWidth=Math.floor(height*ratio)}else{destHeight=Math.floor(width/ratio)}this.bounds={height:destHeight,width:destWidth};this.ratio=destWidth/this.size.width;this.canvas.setAttribute("height",Math.round(destHeight*window.devicePixelRatio));this.canvas.setAttribute("width",Math.round(destWidth*window.devicePixelRatio));this.canvas.style.height=destHeight+"px";this.canvas.style.width=destWidth+"px"}}]);return AG2D}();exports.default=AG2D},{"./modules/AnimationManager":2,"./modules/AssetLoader":3,"./modules/AudioManager":4,"./modules/EventEmitter":5,"./modules/EventHandler":6,"./modules/Scene":7,"./modules/SceneManager":8,"./modules/Utils":9}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AnimationManager=function(){function AnimationManager(){_classCallCheck(this,AnimationManager);this.animations={};this.animationNames=[]}_createClass(AnimationManager,[{key:"add",value:function add(animation){if(animation.name in this.animations===false){this.animations[animation.name]=animation;this.animationNames=Object.keys(this.animations)}else{throw new Error("An animation with the name `"+animation.name+"` already exists")}}},{key:"remove",value:function remove(name){if(name in this.animations){delete this.animations[name];this.animationNames=Object.keys(this.animations)}else{throw new Error("No animation with the name `"+name+"` exists")}}},{key:"update",value:function update(deltaTime){var _this=this;this.animationNames.forEach(function(animation){_this.animations[animation].update(deltaTime)})}}]);return AnimationManager}();exports.default=AnimationManager},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Utils=require("./Utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AssetLoader=function(){function AssetLoader(){_classCallCheck(this,AssetLoader);this.assets={};this.assetsToLoad=[];this.assetsLoaded=false;this.customAssetTypes={}}_createClass(AssetLoader,[{key:"addAsset",value:function addAsset(asset){if(asset.type){switch(asset.type){case"audio":{if(!asset.sources){throw new Error("Asset does not have sources "+asset)}else if(!asset.name){throw new Error("Asset does not have a name "+asset)}else{this.assetsToLoad.push(asset)}break}case"image":{if(!asset.path){throw new Error("Asset does not have a path "+asset)}else if(!asset.name){throw new Error("Asset does not have a name "+asset)}else{this.assetsToLoad.push(asset)}break}case"video":{if(!asset.sources){throw new Error("Asset does not have sources "+asset)}else if(!asset.name){throw new Error("Asset does not have a name "+asset)}else{this.assetsToLoad.push(asset)}break}default:{if(this.customAssetTypes[asset.type]){if(this.customAssetTypes[asset.type].validationFn(asset)){this.assetsToLoad.push(asset)}}else{throw new Error("Asset is not a valid type")}}}}else{throw new Error("Asset does not have a type",asset)}}},{key:"addAssets",value:function addAssets(assets){var _this=this;if(Object.prototype.toString.call(assets)!=="[object Array]"){throw new Error("`addAssets` must be passed an array")}else{assets.forEach(function(asset){_this.addAsset(asset)})}}},{key:"addAssetType",value:function addAssetType(type,validationFn,loadFn){if(type in this.customAssetTypes===false){this.customAssetTypes[type]={};this.customAssetTypes[type].validationFn=validationFn;this.customAssetTypes[type].loadFn=loadFn}else{throw new Error("An asset type with the type of "+type+" already exists")}}},{key:"loadAssets",value:function loadAssets(){var _this2=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_Utils.noOp;if(this.assetsToLoad.length>0){this.assetsLoaded=false;this.loadAsset(this.assetsToLoad[0],function(){var _assetsToLoad=_slicedToArray(_this2.assetsToLoad,1);_this2.assets[_this2.assetsToLoad[0].name]=_assetsToLoad[0];_this2.assetsToLoad.shift();_this2.loadAssets(callback)})}else{this.assetsLoaded=true;return callback()}}},{key:"loadAsset",value:function loadAsset(asset,callback){switch(asset.type){case"audio":{this.loadAudio(asset,callback);break}case"image":{this.loadImage(asset,callback);break}case"video":{this.loadVideo(asset,callback);break}default:{if(this.customAssetTypes[asset.type]){this.customAssetTypes[asset.type].loadFn(asset,callback)}else{throw new Error("Asset has no type")}}}}},{key:"loadAudio",value:function loadAudio(asset,callback){(0,_Utils.getAudioArrayBuffer)(asset.sources,function(buffer){asset.buffer=buffer;callback()})}},{key:"loadImage",value:function loadImage(asset,callback){var img=new Image;img.addEventListener("load",function(){asset.loaded=true;asset.element=img;return callback()});img.addEventListener("error",function(e){throw new Error(e)});img.crossOrigin="anonymous";img.src=asset.path}},{key:"loadVideo",value:function loadVideo(asset,callback){var video=document.createElement("video");asset.element=video;video.addEventListener("error",function(e){throw new Error(e)});(0,_Utils.getVideoBlob)(asset.sources,function(blob,supportedVideoType){var sourceEl=document.createElement("source");sourceEl.type=supportedVideoType.type;sourceEl.src=blob;video.appendChild(sourceEl);asset.loaded=true;return callback()})}}]);return AssetLoader}();exports.default=AssetLoader},{"./Utils":9}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Utils=require("./Utils");var _EventHandler=require("./EventHandler");var _EventHandler2=_interopRequireDefault(_EventHandler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AudioManager=function(){function AudioManager(){_classCallCheck(this,AudioManager);this.eventHandler=new _EventHandler2.default;this.audioClips={};this.audioClipNames=[]}_createClass(AudioManager,[{key:"add",value:function add(audioClip){if(audioClip.name in this.audioClips===false){this.audioClips[audioClip.name]=audioClip;this.audioClipNames=Object.keys(this.audioClips)}else{throw new Error("An audioClip with the name `"+audioClip.name+"` already exists")}}},{key:"init",value:function init(){var _this=this;var cb=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_Utils.noOp;var createContext=function createContext(){_this.context=(0,_Utils.createAudioContext)();_this.eventHandler.removeEvent("iOSTouchStartAudioContext");_this.eventHandler.removeEvent("iOSTouchEndAudioContext");return cb()};var iOSRegex=new RegExp("iPhone|iPad|iPod","i");if(iOSRegex.test(navigator.userAgent)&&!window.MSStream){this.eventHandler.addEvent({name:"iOSTouchStartAudioContext",element:document,type:"touchstart",function:createContext.bind(this)});this.eventHandler.addEvent({name:"iOSTouchEndAudioContext",element:document,type:"touchend",function:createContext.bind(this)})}else{this.context=(0,_Utils.createAudioContext)();return cb()}}},{key:"play",value:function play(name){if(!this.audioClips[name].element){this.audioClips[name].element=this.context.createBufferSource();this.audioClips[name].element.buffer=this.audioClips[name].buffer;this.audioClips[name].element.connect(this.context.destination)}this.audioClips[name].element.start(0)}},{key:"remove",value:function remove(name){if(name in this.audioClips){delete this.audioClips[name];this.audioClipNames=Object.keys(this.audioClips)}else{throw new Error("No audioClip with the name `"+name+"` exists")}}},{key:"resume",value:function resume(){if(this.context){this.context.resume()}}},{key:"stop",value:function stop(name){if(this.audioClips[name].element){this.audioClips[name].element.disconnect(this.context.destination);delete this.audioClips[name].element}}},{key:"suspend",value:function suspend(){if(this.context){this.context.suspend()}}}]);return AudioManager}();exports.default=AudioManager},{"./EventHandler":6,"./Utils":9}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var EventEmitter=function(){function EventEmitter(){_classCallCheck(this,EventEmitter);this.listeners=[]}_createClass(EventEmitter,[{key:"addListener",value:function addListener(name,callback){var count=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Infinity;if(typeof this.listeners[name]==="undefined"){this.listeners[name]=[]}var reference={name:name,callback:callback,count:count};this.listeners[name].push(reference);return reference}},{key:"removeListener",value:function removeListener(reference){if(typeof this.listeners[reference.name]!=="undefined"){this.listeners[reference.name]=this.listeners[reference.name].filter(function(eventListener){return reference!==eventListener});if(this.listeners[reference.name].length===0){delete this.listeners[reference.name]}}}},{key:"emit",value:function emit(name){var _this=this;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(Object.keys(this.listeners).includes(name)){this.listeners[name].forEach(function(listener){listener.callback.apply(listener,args);listener.count-=1;if(listener.count<=0){_this.listeners[name]=_this.listeners[name].filter(function(eventListener){return listener!==eventListener})}})}}}]);return EventEmitter}();exports.default=EventEmitter},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var EventHandler=function(){function EventHandler(){_classCallCheck(this,EventHandler);this.events={}}_createClass(EventHandler,[{key:"addEvent",value:function addEvent(name,type,el,fn){var evt=undefined;if(arguments.length>1){evt={name:name,element:el,type:type,function:fn}}else{evt=name}var customEvent=Object.assign({},evt);if(Object.prototype.hasOwnProperty.call(this.events,customEvent.name)){throw new Error("`name` of `"+customEvent.name+"` is already in use")}customEvent.element.addEventListener(customEvent.type,customEvent.function);this.events[customEvent.name]=customEvent}},{key:"removeEvent",value:function removeEvent(eventName){if(typeof this.events[eventName]==="undefined"){throw new Error("There is no event named `"+eventName+"`")}else{var customEvent=this.events[eventName];customEvent.element.removeEventListener(customEvent.type,customEvent.function);delete this.events[customEvent.name]}}},{key:"removeEvents",value:function removeEvents(){var _this=this;var eventNames=Object.keys(this.events);eventNames.forEach(function(eventName){var customEvent=_this.events[eventName];_this.removeEvent(customEvent.name)})}}]);return EventHandler}();exports.default=EventHandler},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Scene=function(){function Scene(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Default";_classCallCheck(this,Scene);this.name=name;this.enterCount=0;this.exitCount=0;console.log("Init: "+this.name)}_createClass(Scene,[{key:"render",value:function render(){console.log("Render: "+this.name)}},{key:"enter",value:function enter(){console.log("Enter: "+this.name)}},{key:"exit",value:function exit(){console.log("Exit: "+this.name)}},{key:"pause",value:function pause(){console.log("Pause: "+this.name)}},{key:"play",value:function play(){console.log("Play: "+this.name)}},{key:"update",value:function update(){console.log("Update: "+this.name)}}]);return Scene}();exports.default=Scene},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Utils=require("./Utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SceneManager=function(){function SceneManager(){_classCallCheck(this,SceneManager);this.scenes={};this.sceneNames=[]}_createClass(SceneManager,[{key:"add",value:function add(scene){this.scenes[scene.name]=scene;this.sceneNames=Object.keys(this.scenes)}},{key:"goTo",value:function goTo(name){if(this.scenes[name]){if(this.currentScene&&this.currentScene.exit){this.currentScene.exit();this.currentScene.exitCount+=1}this.currentScene=this.scenes[name];if(this.currentScene.enter){this.currentScene.sceneEntered=window.performance.now();this.currentScene.enter();this.currentScene.enterCount+=1}}else{throw new Error("Scene "+name+" does not exist")}}},{key:"next",value:function next(){this.goTo(this.scenes[(0,_Utils.cyclicArray)(this.sceneNames,this.sceneNames.indexOf(this.currentScene.name)+1).value].name)}},{key:"pause",value:function pause(){if(this.currentScene&&this.currentScene.pause){this.currentScene.pause()}}},{key:"play",value:function play(){if(this.currentScene&&this.currentScene.play){this.currentScene.play()}}},{key:"previous",value:function previous(){this.goTo(this.scenes[(0,_Utils.cyclicArray)(this.sceneNames,this.sceneNames.indexOf(this.currentScene.name)-1).value].name)}},{key:"remove",value:function remove(name){delete this.scenes[name];this.sceneNames=Object.keys(this.scenes)}},{key:"render",value:function render(){if(this.currentScene&&this.currentScene.render){this.currentScene.render()}}},{key:"update",value:function update(deltaTime){if(this.currentScene&&this.currentScene.update){this.currentScene.update(deltaTime)}}}]);return SceneManager}();exports.default=SceneManager},{"./Utils":9}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var createAudioContext=function createAudioContext(){var desiredSampleRate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:44100;var AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=new AudioContext;var iOSRegex=new RegExp("iPhone|iPad|iPod","i");var warmContext=function warmContext(context,sampleRate){var buffer=context.createBuffer(1,1,sampleRate);var warmer=context.createBufferSource();warmer.buffer=buffer;warmer.connect(context.destination);if(warmer.start){warmer.start(0)}else if(warmer.noteOn){warmer.noteOn(0)}warmer.disconnect()};if(iOSRegex.test(navigator.userAgent)&&!window.MSStream){warmContext(audioContext,desiredSampleRate);if(audioContext.sampleRate!==desiredSampleRate){audioContext.close();audioContext=new AudioContext;warmContext(audioContext,desiredSampleRate)}}return audioContext};var cyclicArray=function cyclicArray(arr,index){var item=(index%arr.length+arr.length)%arr.length;return{index:item,value:arr[item]}};var getVideoBlob=function getVideoBlob(sources,callback){var testVideo=document.createElement("video");var supportedVideoType=undefined;var supportedVideoTypes=['video/ogg; codecs="theora"','video/webm; codecs="vp8, vorbis"','video/mp4; codecs="avc1.42E01E"'];var _loop=function _loop(i){if(testVideo.canPlayType(supportedVideoTypes[i])){var _sources$filter=sources.filter(function(videoSource){return videoSource.type===supportedVideoTypes[i].match(/[^;]*/gi)[0]});var _sources$filter2=_slicedToArray(_sources$filter,1);supportedVideoType=_sources$filter2[0];return"break"}};for(var i=0;i<supportedVideoTypes.length;i++){var _ret=_loop(i);if(_ret==="break")break}var req=new XMLHttpRequest;req.onload=function(){var source=URL.createObjectURL(req.response);return callback(source,supportedVideoType)};req.onerror=function(e){throw new Error(e)};req.open("get",supportedVideoType.path);req.responseType="blob";req.send()};var getAudioArrayBuffer=function getAudioArrayBuffer(sources,callback){var testAudio=document.createElement("audio");var supportedAudioType=undefined;var supportedAudioTypes=['audio/ogg; codecs="vorbis"','audio/mpeg; codec="mp3"'];var _loop2=function _loop2(i){if(testAudio.canPlayType(supportedAudioTypes[i])){var _sources$filter3=sources.filter(function(audioSource){return audioSource.type===supportedAudioTypes[i].match(/[^;]*/gi)[0]});var _sources$filter4=_slicedToArray(_sources$filter3,1);supportedAudioType=_sources$filter4[0];return"break"}};for(var i=0;i<supportedAudioTypes.length;i++){var _ret2=_loop2(i);if(_ret2==="break")break}window.AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=createAudioContext();audioContext.close();var request=new XMLHttpRequest;request.open("GET",supportedAudioType.path,true);request.responseType="arraybuffer";request.onload=function(){audioContext.decodeAudioData(request.response,function(buffer){callback(buffer)},function(e){throw new Error(e)})};request.onerror=function(e){throw new Error(e)};request.send()};var noOp=function noOp(){};exports.createAudioContext=createAudioContext;exports.cyclicArray=cyclicArray;exports.getAudioArrayBuffer=getAudioArrayBuffer;exports.getVideoBlob=getVideoBlob;exports.noOp=noOp},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sceneManager=exports.eventHandler=exports.eventEmitter=exports.audioManager=exports.assetLoader=exports.animationManager=undefined;var _ag2d=require("ag2d");var _ag2d2=_interopRequireDefault(_ag2d);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var experience=new _ag2d2.default(document.querySelector("canvas"));var animationManager=new _ag2d.AnimationManager;var assetLoader=new _ag2d.AssetLoader;var audioManager=new _ag2d.AudioManager;var eventEmitter=new _ag2d.EventEmitter;var eventHandler=new _ag2d.EventHandler;var sceneManager=new _ag2d.SceneManager;var update=function update(deltaTime){animationManager.update(deltaTime);sceneManager.update(deltaTime)};var render=function render(){sceneManager.render()};var stop=function stop(){audioManager.suspend();sceneManager.pause()};var start=function start(){audioManager.resume();sceneManager.play()};experience.hooks.bind("update",update);experience.hooks.bind("render",render);experience.hooks.bind("stop",stop);experience.hooks.bind("start",start);exports.default=experience;exports.animationManager=animationManager;exports.assetLoader=assetLoader;exports.audioManager=audioManager;exports.eventEmitter=eventEmitter;exports.eventHandler=eventHandler;exports.sceneManager=sceneManager},{ag2d:1}],11:[function(require,module,exports){"use strict";var _experience=require("./experience");var _experience2=_interopRequireDefault(_experience);var _SceneMobileInteraction=require("./scenes/SceneMobileInteraction");var _SceneMobileInteraction2=_interopRequireDefault(_SceneMobileInteraction);var _SceneLoading=require("./scenes/SceneLoading");var _SceneLoading2=_interopRequireDefault(_SceneLoading);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_experience.assetLoader.addAssets([{type:"audio",name:"TestAudio",sources:[{type:"audio/ogg",path:"/audio/TestAudio.ogg"},{type:"audio/mpeg",path:"/audio/TestAudio.mp3"}]},{type:"video",name:"TestVideo",sources:[{type:"video/ogg",path:"/video/TestVideo.ogg"},{type:"video/webm",path:"/video/TestVideo.webm"},{type:"video/mp4",path:"/video/TestVideo.mp4"}]}]);_experience.sceneManager.add(new _SceneMobileInteraction2.default);_experience.sceneManager.add(new _SceneLoading2.default);_experience2.default.configure({canvas:document.querySelector("canvas"),fps:60,backgroundColour:"#FF00FF",size:{height:720,width:1280}});_experience2.default.resizeCanvas(window.innerWidth,window.innerHeight);window.addEventListener("resize",function(){_experience2.default.resizeCanvas(window.innerWidth,window.innerHeight)});_experience.sceneManager.goTo("SceneMobileInteraction");_experience2.default.start()},{"./experience":10,"./scenes/SceneLoading":12,"./scenes/SceneMobileInteraction":13}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");var _SceneStart=require("./SceneStart");var _SceneStart2=_interopRequireDefault(_SceneStart);var _SceneOne=require("./SceneOne");var _SceneOne2=_interopRequireDefault(_SceneOne);var _SceneTwo=require("./SceneTwo");var _SceneTwo2=_interopRequireDefault(_SceneTwo);var _SceneThree=require("./SceneThree");var _SceneThree2=_interopRequireDefault(_SceneThree);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneLoading=function(_Scene){_inherits(SceneLoading,_Scene);function SceneLoading(){_classCallCheck(this,SceneLoading);return _possibleConstructorReturn(this,(SceneLoading.__proto__||Object.getPrototypeOf(SceneLoading)).call(this,"SceneLoading"))}_createClass(SceneLoading,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FFFF00";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText("Please wait, we are loading...",_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText("Please wait, we are loading...",_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){if(this.enterCount===0){_experience.eventEmitter.addListener("assetLoader:loaded",function(){Object.keys(_experience.assetLoader.assets).forEach(function(asset){var currentAsset=_experience.assetLoader.assets[asset];if(currentAsset.type==="video"){currentAsset.element.setAttribute("playsinline",true);currentAsset.element.setAttribute("webkit-playsinline",true)}});_experience.audioManager.add(_experience.assetLoader.assets.TestAudio);_experience.sceneManager.add(new _SceneStart2.default);_experience.sceneManager.add(new _SceneOne2.default);_experience.sceneManager.add(new _SceneTwo2.default);_experience.sceneManager.add(new _SceneThree2.default);_experience.sceneManager.goTo("SceneStart")},1);_experience.assetLoader.loadAssets(function(){_experience.eventEmitter.emit("assetLoader:loaded")})}}}]);return SceneLoading}(_ag2d.Scene);exports.default=SceneLoading},{"../experience":10,"./SceneOne":14,"./SceneStart":15,"./SceneThree":16,"./SceneTwo":17,ag2d:1}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneMobileInteraction=function(_Scene){_inherits(SceneMobileInteraction,_Scene);function SceneMobileInteraction(){_classCallCheck(this,SceneMobileInteraction);return _possibleConstructorReturn(this,(SceneMobileInteraction.__proto__||Object.getPrototypeOf(SceneMobileInteraction)).call(this,"SceneMobileInteraction"))}_createClass(SceneMobileInteraction,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FF0000";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText("Tap to start",_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText("Tap to start",_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){if(this.enterCount===0){_experience.eventEmitter.addListener("audioManager:context ready",function(){document.querySelector("#start").addEventListener("click",function(){_experience2.default.start()});document.querySelector("#stop").addEventListener("click",function(){_experience2.default.stop()});document.querySelector("#restart").addEventListener("click",function(){_experience.sceneManager.goTo("SceneStart");_experience2.default.start()});_experience.sceneManager.goTo("SceneLoading")},1);_experience.audioManager.init(function(){_experience.eventEmitter.emit("audioManager:context ready")})}}}]);return SceneMobileInteraction}(_ag2d.Scene);exports.default=SceneMobileInteraction},{"../experience":10,ag2d:1}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneOne=function(_Scene){_inherits(SceneOne,_Scene);function SceneOne(){_classCallCheck(this,SceneOne);var _this2=_possibleConstructorReturn(this,(SceneOne.__proto__||Object.getPrototypeOf(SceneOne)).call(this,"SceneOne"));_this2.video=_experience.assetLoader.assets.TestVideo;return _this2}_createClass(SceneOne,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FF0000";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.drawImage(this.video.element,0,0);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){var _this=this;this.video.element.addEventListener("ended",function nextScene(){_this.video.element.removeEventListener("ended",nextScene,false);_experience.sceneManager.next()});this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneOne}(_ag2d.Scene);exports.default=SceneOne},{"../experience":10,ag2d:1}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneStart=function(_Scene){_inherits(SceneStart,_Scene);function SceneStart(){_classCallCheck(this,SceneStart);return _possibleConstructorReturn(this,(SceneStart.__proto__||Object.getPrototypeOf(SceneStart)).call(this,"SceneStart"))}_createClass(SceneStart,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FF0000";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText("Click to start",_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText("Click to start",_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){_experience.eventHandler.addEvent({name:"SceneStartInteraction",element:_experience2.default.canvas,type:"click",function:function _function(){_experience.sceneManager.next()}})}},{key:"exit",value:function exit(){_experience.eventHandler.removeEvent("SceneStartInteraction")}}]);return SceneStart}(_ag2d.Scene);exports.default=SceneStart},{"../experience":10,ag2d:1}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneThree=function(_Scene){_inherits(SceneThree,_Scene);function SceneThree(){_classCallCheck(this,SceneThree);var _this=_possibleConstructorReturn(this,(SceneThree.__proto__||Object.getPrototypeOf(SceneThree)).call(this,"SceneThree"));_this.video=_experience.assetLoader.assets.TestVideo;return _this}_createClass(SceneThree,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FF0000";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.drawImage(this.video.element,0,0);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneThree}(_ag2d.Scene);exports.default=SceneThree},{"../experience":10,ag2d:1}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _experience=require("../experience");var _experience2=_interopRequireDefault(_experience);var _ag2d=require("ag2d");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SceneTwo=function(_Scene){_inherits(SceneTwo,_Scene);function SceneTwo(){_classCallCheck(this,SceneTwo);var _this2=_possibleConstructorReturn(this,(SceneTwo.__proto__||Object.getPrototypeOf(SceneTwo)).call(this,"SceneTwo"));_this2.video=_experience.assetLoader.assets.TestVideo;return _this2}_createClass(SceneTwo,[{key:"render",value:function render(){_experience2.default.context.fillStyle="#FF0000";_experience2.default.context.fillRect(0,0,_experience2.default.size.width,_experience2.default.size.height);_experience2.default.context.drawImage(this.video.element,0,0);_experience2.default.context.textAlign="center";_experience2.default.context.textBaseline="middle";_experience2.default.context.font="40px sans-serif";_experience2.default.context.strokeStyle="black";_experience2.default.context.lineWidth=4;_experience2.default.context.lineJoin="round";_experience2.default.context.strokeText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2);_experience2.default.context.fillStyle="white";_experience2.default.context.fillText(this.name,_experience2.default.size.width/2,_experience2.default.size.height/2)}},{key:"enter",value:function enter(){var _this=this;this.video.element.addEventListener("ended",function nextScene(){_this.video.element.removeEventListener("ended",nextScene,false);_experience.sceneManager.next()});this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneTwo}(_ag2d.Scene);exports.default=SceneTwo},{"../experience":10,ag2d:1}]},{},[11]);