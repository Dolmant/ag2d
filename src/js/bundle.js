(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AnimationManager",{enumerable:true,get:function get(){return _AnimationManager.default}});Object.defineProperty(exports,"Animation",{enumerable:true,get:function get(){return _Animation.default}});Object.defineProperty(exports,"AssetLoader",{enumerable:true,get:function get(){return _AssetLoader.default}});Object.defineProperty(exports,"AudioManager",{enumerable:true,get:function get(){return _AudioManager.default}});Object.defineProperty(exports,"EventEmitter",{enumerable:true,get:function get(){return _EventEmitter.default}});Object.defineProperty(exports,"EventHandler",{enumerable:true,get:function get(){return _EventHandler.default}});Object.defineProperty(exports,"KeyManager",{enumerable:true,get:function get(){return _KeyManager.default}});Object.defineProperty(exports,"SceneManager",{enumerable:true,get:function get(){return _SceneManager.default}});Object.defineProperty(exports,"Scene",{enumerable:true,get:function get(){return _Scene.default}});Object.defineProperty(exports,"SpriteSheet",{enumerable:true,get:function get(){return _SpriteSheet.default}});exports.default=void 0;var _Utils=require("./modules/Utils");var _AnimationManager=_interopRequireDefault(require("./modules/AnimationManager"));var _Animation=_interopRequireDefault(require("./modules/Animation"));var _AssetLoader=_interopRequireDefault(require("./modules/AssetLoader"));var _AudioManager=_interopRequireDefault(require("./modules/AudioManager"));var _EventEmitter=_interopRequireDefault(require("./modules/EventEmitter"));var _EventHandler=_interopRequireDefault(require("./modules/EventHandler"));var _KeyManager=_interopRequireDefault(require("./modules/KeyManager"));var _SceneManager=_interopRequireDefault(require("./modules/SceneManager"));var _Scene=_interopRequireDefault(require("./modules/Scene"));var _SpriteSheet=_interopRequireDefault(require("./modules/SpriteSheet"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AG2D=function(){function AG2D(){_classCallCheck(this,AG2D);this.hasInitialised=false;this.setUpHooks()}_createClass(AG2D,[{key:"init",value:function init(){var canvas=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.createElement("CANVAS");if(canvas.tagName.toLowerCase()!=="canvas"){throw new Error("".concat(canvas," is not a canvas element"))}this.canvas=canvas;this.context=this.canvas.getContext("2d");this.isRunning=false;this.context.imageSmoothingEnabled=true;this.updatesPerSecond=120;this.updateInterval=1e3/this.updatesPerSecond;this.updateAccumulator=0;this.size={height:this.canvas.getBoundingClientRect().height,width:this.canvas.getBoundingClientRect().width};this.bounds={height:this.canvas.getBoundingClientRect().height,width:this.canvas.getBoundingClientRect().width};this.resizeCanvas(this.bounds.width,this.bounds.height);this.hasInitialised=true}},{key:"clearCanvas",value:function clearCanvas(){this.context.clearRect(0,0,this.size.width,this.size.height);if(this.backgroundColour!=="transparent"){this.context.fillStyle=this.backgroundColour;this.context.fillRect(0,0,this.size.width,this.size.height)}}},{key:"configure",value:function configure(options){if(!this.hasInitialised){this.init(options.canvas)}this.updatesPerSecond=typeof options.updatesPerSecond==="number"?options.updatesPerSecond:60;this.updateInterval=1e3/this.updatesPerSecond;this.backgroundColour=options.backgroundColour||"transparent";this.imageSmoothing=typeof options.imageSmoothing==="boolean"?options.imageSmoothing:true;if(options.size){this.size={height:options.size.height,width:options.size.width};this.bounds={height:options.size.height,width:options.size.width};this.resizeCanvas(this.bounds.width,this.bounds.height)}}},{key:"render",value:function render(){this.context.save();this.context.scale(window.devicePixelRatio*this.ratio,window.devicePixelRatio*this.ratio);this.clearCanvas();this.hooks.render();this.context.restore();this.lastRender=window.performance.now()}},{key:"renderLoop",value:function renderLoop(){var currentTime=arguments.length>0&&arguments[0]!==undefined?arguments[0]:window.performance.now();if(this.isRunning){window.requestAnimationFrame(this.renderLoop.bind(this))}this.updateAccumulator+=currentTime-this.lastUpdate;while(this.updateAccumulator>this.updateInterval){this.update(this.updateInterval);this.updateAccumulator-=this.updateInterval}this.render()}},{key:"setUpHooks",value:function setUpHooks(){var _this=this;this.hooks={render:_Utils.noOp,start:_Utils.noOp,stop:_Utils.noOp,update:_Utils.noOp,bind:function bind(name,func){_this.hooks[name]=func},unbind:function unbind(name){delete _this.hooks[name]}}}},{key:"start",value:function start(){this.isRunning=true;var now=window.performance.now();this.lastUpdate=now;this.lastRender=now;this.hooks.start();this.renderLoop()}},{key:"stop",value:function stop(){this.isRunning=false;this.hooks.stop()}},{key:"update",value:function update(deltaTime){this.hooks.update(deltaTime);this.lastUpdate=window.performance.now()}},{key:"resizeCanvas",value:function resizeCanvas(width,height){var ratio=this.size.width/this.size.height;var destRatio=width/height;var destWidth=width;var destHeight=height;if(destRatio>ratio){destWidth=Math.floor(height*ratio)}else{destHeight=Math.floor(width/ratio)}this.bounds={height:destHeight,width:destWidth};this.ratio=destWidth/this.size.width;this.canvas.setAttribute("height",Math.round(destHeight*window.devicePixelRatio));this.canvas.setAttribute("width",Math.round(destWidth*window.devicePixelRatio));this.canvas.style.height="".concat(destHeight,"px");this.canvas.style.width="".concat(destWidth,"px");this.context.imageSmoothingEnabled=this.imageSmoothing}}]);return AG2D}();var _default=AG2D;exports.default=_default},{"./modules/Animation":2,"./modules/AnimationManager":3,"./modules/AssetLoader":4,"./modules/AudioManager":5,"./modules/EventEmitter":6,"./modules/EventHandler":7,"./modules/KeyManager":8,"./modules/Scene":9,"./modules/SceneManager":10,"./modules/SpriteSheet":11,"./modules/Utils":12}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Utils=require("./Utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Animation=function(){function Animation(options){_classCallCheck(this,Animation);var currentTime=window.performance.now();this.fps=options.fps;this.frames=options.frames;this.loop=typeof options.loop==="boolean"?options.loop:true;this.loopType=options.loopType||"normal";this.name=options.name;this.pauseCb=options.pauseCb||_Utils.noOp;this.resetCb=options.resetCb||_Utils.noOp;this.restartCb=options.restartCb||_Utils.noOp;this.reverse=typeof options.loop==="boolean"?options.reverse:false;this.spriteSheet=options.spriteSheet;this.startCb=options.startCb||_Utils.noOp;this.stopCb=options.stopCb||_Utils.noOp;this.animate=false;this.currentFrameIndex=this.getStartFrameIndex();this.interval=1e3/options.fps;this.lastDraw=currentTime;this.lastUpdate=currentTime}_createClass(Animation,[{key:"getCurrentFrameIndex",value:function getCurrentFrameIndex(){return this.currentFrameIndex}},{key:"getEndFrameIndex",value:function getEndFrameIndex(){return this.reverse?0:this.frames.length-1}},{key:"updateCurrentFrameIndex",value:function updateCurrentFrameIndex(){if(this.loop){switch(this.loopType){case"yoyo":{if(this.getCurrentFrameIndex()===this.getEndFrameIndex()){this.reverse=!this.reverse;if(!this.reverse){this.restart()}}else{this.currentFrameIndex=this.reverse?this.currentFrameIndex-1:this.currentFrameIndex+1}break}case"fastYoyo":{if(this.getCurrentFrameIndex()===this.getEndFrameIndex()){this.reverse=!this.reverse;if(!this.reverse){this.restart()}}this.currentFrameIndex=this.reverse?this.currentFrameIndex-1:this.currentFrameIndex+1;break}default:{if(this.getCurrentFrameIndex()===this.getEndFrameIndex()){this.restart()}else{this.currentFrameIndex=this.reverse?this.currentFrameIndex-1:this.currentFrameIndex+1}}}}else if(this.getCurrentFrameIndex()===this.getEndFrameIndex()){this.stop()}else{this.currentFrameIndex=this.reverse?this.currentFrameIndex-1:this.currentFrameIndex+1}}},{key:"getStartFrameIndex",value:function getStartFrameIndex(){return this.reverse?this.frames.length-1:0}},{key:"pause",value:function pause(){this.animate=false;this.pauseCb()}},{key:"render",value:function render(context,x,y){var width=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.spriteSheet.frameWidth;var height=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.spriteSheet.frameHeight;var cropWidth=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.spriteSheet.frameWidth;var cropHeight=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this.spriteSheet.frameHeight;var row=Math.floor(this.frames[this.currentFrameIndex]/this.spriteSheet.columns);var col=Math.floor(this.frames[this.currentFrameIndex]%this.spriteSheet.columns);context.drawImage(this.spriteSheet.image,col*this.spriteSheet.frameWidth,row*this.spriteSheet.frameHeight,cropWidth,cropHeight,x,y,width,height)}},{key:"reset",value:function reset(){this.currentFrameIndex=this.getStartFrameIndex();this.animate=false;this.resetCb()}},{key:"restart",value:function restart(){this.currentFrameIndex=this.getStartFrameIndex();this.animate=true;this.restartCb()}},{key:"start",value:function start(){this.animate=true;this.startCb()}},{key:"stop",value:function stop(){this.animate=false;this.stopCb()}},{key:"update",value:function update(deltaTime){if(!this.animate){return}var drawDeltaTime=this.lastUpdate-this.lastDraw;if(drawDeltaTime>this.interval){this.updateCurrentFrameIndex();this.lastDraw=this.lastUpdate-drawDeltaTime%this.interval}this.lastUpdate+=deltaTime}}]);return Animation}();var _default=Animation;exports.default=_default},{"./Utils":12}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AnimationManager=function(){function AnimationManager(){_classCallCheck(this,AnimationManager);this.animations={};this.animationNames=[]}_createClass(AnimationManager,[{key:"add",value:function add(animation){if(animation.name in this.animations===false){this.animations[animation.name]=animation;this.animationNames=Object.keys(this.animations)}else{throw new Error("An animation with the name `".concat(animation.name,"` already exists"))}}},{key:"remove",value:function remove(name){if(name in this.animations){delete this.animations[name];this.animationNames=Object.keys(this.animations)}else{throw new Error("No animation with the name `".concat(name,"` exists"))}}},{key:"update",value:function update(deltaTime){var _this=this;this.animationNames.forEach(function(animation){_this.animations[animation].update(deltaTime)})}}]);return AnimationManager}();var _default=AnimationManager;exports.default=_default},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Utils=require("./Utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AssetLoader=function(){function AssetLoader(){_classCallCheck(this,AssetLoader);this.assets={};this.assetsToLoad=[];this.assetsLoaded=false;this.assetsWaitingForFilesize=0;this.customAssetTypes={};this.filesize={loaded:0,toLoad:0};this.setUpHooks()}_createClass(AssetLoader,[{key:"setUpHooks",value:function setUpHooks(){var _this=this;this.hooks={progress:_Utils.noOp,bind:function bind(name,func){_this.hooks[name]=func},unbind:function unbind(name){delete _this.hooks[name]}}}},{key:"addAsset",value:function addAsset(asset){var _this2=this;if(asset.type){switch(asset.type){case"audio":{if(!asset.sources){throw new Error("Asset does not have sources ".concat(asset))}if(!asset.name){throw new Error("Asset does not have a name ".concat(asset))}(0,_Utils.getSupportedAudioSource)(asset.sources,function(supportedAudioSource){_this2.assetsWaitingForFilesize+=1;(0,_Utils.getFilesize)(supportedAudioSource.path,function(filesize){_this2.assetsWaitingForFilesize-=1;supportedAudioSource.filesize=filesize;_this2.filesize.toLoad+=filesize;asset.source=supportedAudioSource;delete asset.sources;_this2.assetsToLoad.push(asset)})});break}case"video":{if(!asset.sources){throw new Error("Asset does not have sources ".concat(asset))}if(!asset.name){throw new Error("Asset does not have a name ".concat(asset))}(0,_Utils.getSupportedVideoSource)(asset.sources,function(supportedVideoSource){_this2.assetsWaitingForFilesize+=1;(0,_Utils.getFilesize)(supportedVideoSource.path,function(filesize){_this2.assetsWaitingForFilesize-=1;supportedVideoSource.filesize=filesize;_this2.filesize.toLoad+=filesize;asset.source=supportedVideoSource;delete asset.sources;_this2.assetsToLoad.push(asset)})});break}case"image":case"font":{if(!asset.path){throw new Error("Asset does not have a path ".concat(asset))}if(!asset.name){throw new Error("Asset does not have a name ".concat(asset))}this.assetsToLoad.push(asset);break}default:{if(this.customAssetTypes[asset.type]){if(this.customAssetTypes[asset.type].validationFn(asset)){this.assetsToLoad.push(asset)}}else{throw new Error("Asset is not a valid type")}}}}else{throw new Error("Asset does not have a type",asset)}}},{key:"addAssets",value:function addAssets(assets){var _this3=this;if(!Object.prototype.toString.call(assets)==="[object Array]"){throw new Error("`addAssets` must be passed an array")}else{assets.forEach(function(asset){_this3.addAsset(asset)})}}},{key:"addAssetType",value:function addAssetType(assetType,validationFn,loadFn){if(assetType in this.customAssetTypes===false){this.customAssetTypes[assetType]={};this.customAssetTypes[assetType].validationFn=validationFn;this.customAssetTypes[assetType].loadFn=loadFn}else{throw new Error("An asset type with the type of ".concat(assetType," already exists"))}}},{key:"loadAssets",value:function loadAssets(){var _this4=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_Utils.noOp;if(this.assetsWaitingForFilesize>0){window.requestAnimationFrame(function(){_this4.loadAssets(callback)});return}if(this.assetsToLoad.length>0){this.assetsLoaded=false;var filesizeLoaded=this.filesize.loaded;this.loadAsset(this.assetsToLoad[0],function(asset){_this4.assets[asset.name]=asset;_this4.assetsToLoad.shift();_this4.loadAssets(callback)},function(progress){_this4.filesize.loaded=filesizeLoaded+progress;_this4.hooks.progress(_this4.filesize.loaded/_this4.filesize.toLoad)})}else{this.assetsLoaded=true;return callback()}}},{key:"loadAsset",value:function loadAsset(asset,callback,progressCallback){switch(asset.type){case"audio":{this.loadAudio(asset,callback,progressCallback);break}case"image":{this.loadImage(asset,callback,progressCallback);break}case"video":{this.loadVideo(asset,callback,progressCallback);break}case"font":{this.loadFont(asset,callback,progressCallback);break}default:{if(this.customAssetTypes[asset.type]){this.customAssetTypes[asset.type].loadFn(asset,callback,progressCallback)}else{throw new Error("Asset has no type")}}}}},{key:"loadAudio",value:function loadAudio(asset,callback,progressCallback){(0,_Utils.getAudioArrayBuffer)(asset.source.path,function(buffer){asset.buffer=buffer;callback(asset)},progressCallback)}},{key:"loadImage",value:function loadImage(asset,callback,progressCallback){var img=new Image;img.addEventListener("load",function(){asset.element=img;return callback(asset)});img.addEventListener("progress",function(e){if(e.lengthComputable){return progressCallback(e.loaded)}});img.addEventListener("error",function(e){throw new Error(e)});img.crossOrigin="anonymous";img.src=asset.path}},{key:"loadVideo",value:function loadVideo(asset,callback,progressCallback){var video=document.createElement("video");asset.element=video;video.addEventListener("error",function(e){throw new Error(e)});(0,_Utils.getVideoBlob)(asset.source.path,function(blob){var sourceEl=document.createElement("source");sourceEl.type=asset.source.type;sourceEl.crossOrigin="anonymous";sourceEl.src=blob;video.appendChild(sourceEl);return callback(asset)},progressCallback)}},{key:"loadFont",value:function loadFont(asset,callback){document.fonts.load('16px "'.concat(asset.name,'"')).then(function(){return callback(asset)})}}]);return AssetLoader}();var _default=AssetLoader;exports.default=_default},{"./Utils":12}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Utils=require("./Utils");var _EventHandler=_interopRequireDefault(require("./EventHandler"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AudioManager=function(){function AudioManager(){_classCallCheck(this,AudioManager);this.eventHandler=new _EventHandler.default;this.audioClips={};this.audioClipNames=[]}_createClass(AudioManager,[{key:"add",value:function add(audioClip){if(audioClip.name in this.audioClips===false){this.audioClips[audioClip.name]=audioClip;this.audioClipNames=Object.keys(this.audioClips)}else{throw new Error("An audioClip with the name `".concat(audioClip.name,"` already exists"))}}},{key:"init",value:function init(){var _this=this;var cb=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_Utils.noOp;var createContext=function createContext(){_this.context=(0,_Utils.createAudioContext)();_this.streamDestination=_this.context.createMediaStreamDestination();_this.eventHandler.removeEvent("iOSTouchStartAudioContext");_this.eventHandler.removeEvent("iOSTouchEndAudioContext");return cb()};var iOSRegex=new RegExp("iPhone|iPad|iPod","i");if(iOSRegex.test(navigator.userAgent)&&!window.MSStream){this.eventHandler.addEvent({name:"iOSTouchStartAudioContext",element:document,type:"touchstart",function:createContext.bind(this)});this.eventHandler.addEvent({name:"iOSTouchEndAudioContext",element:document,type:"touchend",function:createContext.bind(this)})}else{this.context=(0,_Utils.createAudioContext)();this.streamDestination=this.context.createMediaStreamDestination();return cb()}}},{key:"play",value:function play(name){if(!this.audioClips[name].element){this.audioClips[name].element=this.context.createBufferSource();this.audioClips[name].element.buffer=this.audioClips[name].buffer;this.audioClips[name].element.connect(this.context.destination);this.audioClips[name].element.connect(this.streamDestination)}this.audioClips[name].element.start(0)}},{key:"remove",value:function remove(name){if(name in this.audioClips){delete this.audioClips[name];this.audioClipNames=Object.keys(this.audioClips)}else{throw new Error("No audioClip with the name `".concat(name,"` exists"))}}},{key:"resume",value:function resume(){if(this.context){this.context.resume()}}},{key:"stop",value:function stop(name){if(this.audioClips[name].element){this.audioClips[name].element.disconnect(this.context.destination);this.audioClips[name].element.disconnect(this.streamDestination);delete this.audioClips[name].element}}},{key:"suspend",value:function suspend(){if(this.context){this.context.suspend()}}}]);return AudioManager}();var _default=AudioManager;exports.default=_default},{"./EventHandler":7,"./Utils":12}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var EventEmitter=function(){function EventEmitter(){_classCallCheck(this,EventEmitter);this.listeners=[]}_createClass(EventEmitter,[{key:"addListener",value:function addListener(name,callback){var count=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Infinity;if(typeof this.listeners[name]==="undefined"){this.listeners[name]=[]}var reference={name:name,callback:callback,count:count};this.listeners[name].push(reference);return reference}},{key:"removeListener",value:function removeListener(reference){if(typeof this.listeners[reference.name]!=="undefined"){this.listeners[reference.name]=this.listeners[reference.name].filter(function(eventListener){return reference!==eventListener});if(this.listeners[reference.name].length===0){delete this.listeners[reference.name]}}}},{key:"emit",value:function emit(name){var _this=this;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(Object.keys(this.listeners).includes(name)){this.listeners[name].forEach(function(listener){listener.callback.apply(listener,args);listener.count-=1;if(listener.count<=0){_this.listeners[name]=_this.listeners[name].filter(function(eventListener){return listener!==eventListener})}})}}}]);return EventEmitter}();var _default=EventEmitter;exports.default=_default},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var EventHandler=function(){function EventHandler(){_classCallCheck(this,EventHandler);this.events={}}_createClass(EventHandler,[{key:"addEvent",value:function addEvent(name,type,el,fn){var evt=void 0;if(arguments.length>1){evt={name:name,element:el,type:type,function:fn}}else{evt=name}var customEvent=Object.assign({},evt);if(Object.prototype.hasOwnProperty.call(this.events,customEvent.name)){throw new Error("`name` of `".concat(customEvent.name,"` is already in use"))}customEvent.element.addEventListener(customEvent.type,customEvent.function);this.events[customEvent.name]=customEvent}},{key:"removeEvent",value:function removeEvent(eventName){if(typeof this.events[eventName]==="undefined"){throw new Error("There is no event named `".concat(eventName,"`"))}else{var customEvent=this.events[eventName];customEvent.element.removeEventListener(customEvent.type,customEvent.function);delete this.events[customEvent.name]}}},{key:"removeEvents",value:function removeEvents(){var _this=this;var eventNames=Object.keys(this.events);eventNames.forEach(function(eventName){var customEvent=_this.events[eventName];_this.removeEvent(customEvent.name)})}}]);return EventHandler}();var _default=EventHandler;exports.default=_default},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var KeyManager=function(){function KeyManager(){_classCallCheck(this,KeyManager);this.keysDown={}}_createClass(KeyManager,[{key:"keyUp",value:function keyUp(e){this.keysDown[e.keyCode]=false}},{key:"keyDown",value:function keyDown(e){if(!this.isDown(e.keyCode)){this.keysDown[e.keyCode]=window.performance.now()}}},{key:"isDown",value:function isDown(key){return Boolean(this.keysDown[key])}}]);return KeyManager}();var _default=KeyManager;exports.default=_default},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Scene=function(){function Scene(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Default";_classCallCheck(this,Scene);this.enterCount=0;this.exitCount=0;this.name=name}_createClass(Scene,[{key:"enter",value:function enter(){}},{key:"exit",value:function exit(){}},{key:"pause",value:function pause(){}},{key:"play",value:function play(){}},{key:"render",value:function render(){}},{key:"update",value:function update(){}}]);return Scene}();var _default=Scene;exports.default=_default},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _Utils=require("./Utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SceneManager=function(){function SceneManager(){_classCallCheck(this,SceneManager);this.scenes={};this.sceneNames=[]}_createClass(SceneManager,[{key:"add",value:function add(scene){this.scenes[scene.name]=scene;this.sceneNames=Object.keys(this.scenes)}},{key:"goTo",value:function goTo(name){if(this.scenes[name]){if(this.currentScene){this.currentScene.exit();this.currentScene.exitCount+=1}this.currentScene=this.scenes[name];this.currentScene.sceneEntered=window.performance.now();this.currentScene.enter();this.currentScene.enterCount+=1}else{throw new Error("Scene ".concat(name," does not exist"))}}},{key:"next",value:function next(){this.goTo(this.scenes[(0,_Utils.cyclicArray)(this.sceneNames,this.sceneNames.indexOf(this.currentScene.name)+1).value].name)}},{key:"pause",value:function pause(){if(this.currentScene){this.currentScene.pause()}}},{key:"play",value:function play(){if(this.currentScene){this.currentScene.play()}}},{key:"previous",value:function previous(){this.goTo(this.scenes[(0,_Utils.cyclicArray)(this.sceneNames,this.sceneNames.indexOf(this.currentScene.name)-1).value].name)}},{key:"remove",value:function remove(name){delete this.scenes[name];this.sceneNames=Object.keys(this.scenes)}},{key:"render",value:function render(){if(this.currentScene){this.currentScene.render()}}},{key:"update",value:function update(deltaTime){if(this.currentScene){this.currentScene.update(deltaTime)}}}]);return SceneManager}();var _default=SceneManager;exports.default=_default},{"./Utils":12}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SpriteSheet=function SpriteSheet(options){_classCallCheck(this,SpriteSheet);this.columns=options.columns||1;this.frameHeight=options.frameHeight;this.frameWidth=options.frameWidth;this.image=options.image;this.name=options.name;this.rows=options.rows||1};var _default=SpriteSheet;exports.default=_default},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noOp=exports.getFilesize=exports.getAudioArrayBuffer=exports.getSupportedAudioSource=exports.getVideoBlob=exports.getSupportedVideoSource=exports.cyclicArray=exports.createAudioContext=void 0;var createAudioContext=function createAudioContext(){var desiredSampleRate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:44100;var AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=new AudioContext;var iOSRegex=new RegExp("iPhone|iPad|iPod","i");var warmContext=function warmContext(context,sampleRate){var buffer=context.createBuffer(1,1,sampleRate);var warmer=context.createBufferSource();warmer.buffer=buffer;warmer.connect(context.destination);if(warmer.start){warmer.start(0)}else if(warmer.noteOn){warmer.noteOn(0)}warmer.disconnect()};if(iOSRegex.test(navigator.userAgent)&&!window.MSStream){warmContext(audioContext,desiredSampleRate);if(audioContext.sampleRate!==desiredSampleRate){audioContext.close();audioContext=new AudioContext;warmContext(audioContext,desiredSampleRate)}}return audioContext};exports.createAudioContext=createAudioContext;var cyclicArray=function cyclicArray(arr,index){var item=(index%arr.length+arr.length)%arr.length;return{index:item,value:arr[item]}};exports.cyclicArray=cyclicArray;var getSupportedVideoSource=function getSupportedVideoSource(sources,callback){var testVideo=document.createElement("video");var supportedVideoSource=void 0;var supportedVideoTypes=['video/ogg; codecs="theora"','video/webm; codecs="vp8, vorbis"','video/mp4; codecs="avc1.42E01E"'];var _loop=function _loop(i){var currentVideoType=supportedVideoTypes[i];if(testVideo.canPlayType(currentVideoType)){var matchedSource=sources.find(function(source){return source.type===currentVideoType.match(/[^;]*/gi)[0]});if(matchedSource){supportedVideoSource=matchedSource;return"break"}}};for(var i=0;i<supportedVideoTypes.length;i++){var _ret=_loop(i);if(_ret==="break")break}if(supportedVideoSource){return callback(supportedVideoSource)}throw new Error("This browser does not support any of the sources provided in ".concat(sources))};exports.getSupportedVideoSource=getSupportedVideoSource;var getVideoBlob=function getVideoBlob(url,callback,progressCallback){var request=new XMLHttpRequest;request.onprogress=function(e){if(e.lengthComputable){return progressCallback(e.loaded)}};request.onload=function(){var blob=URL.createObjectURL(request.response);return callback(blob)};request.onerror=function(e){throw new Error(e)};request.open("get",url,true);request.responseType="blob";request.send()};exports.getVideoBlob=getVideoBlob;var getSupportedAudioSource=function getSupportedAudioSource(sources,callback){var testAudio=document.createElement("audio");var supportedAudioSource=void 0;var supportedAudioTypes=['audio/ogg; codecs="vorbis"','audio/mpeg; codec="mp3"'];var _loop2=function _loop2(i){var currentAudioType=supportedAudioTypes[i];if(testAudio.canPlayType(currentAudioType)){var matchedSource=sources.find(function(source){return source.type===currentAudioType.match(/[^;]*/gi)[0]});if(matchedSource){supportedAudioSource=matchedSource;return"break"}return"break"}};for(var i=0;i<supportedAudioTypes.length;i++){var _ret2=_loop2(i);if(_ret2==="break")break}if(supportedAudioSource){return callback(supportedAudioSource)}throw new Error("This browser does not support any of the sources provided in ".concat(sources))};exports.getSupportedAudioSource=getSupportedAudioSource;var getAudioArrayBuffer=function getAudioArrayBuffer(url,callback,progressCallback){window.AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=createAudioContext();audioContext.close();var request=new XMLHttpRequest;request.open("GET",url,true);request.responseType="arraybuffer";request.onprogress=function(e){if(e.lengthComputable){return progressCallback(e.loaded)}};request.onload=function(){audioContext.decodeAudioData(request.response,function(buffer){callback(buffer)},function(e){throw new Error(e)})};request.onerror=function(e){throw new Error(e)};request.send()};exports.getAudioArrayBuffer=getAudioArrayBuffer;var getFilesize=function getFilesize(url,callback){var request=new XMLHttpRequest;request.open("HEAD",url,true);request.onreadystatechange=function(){if(request.readyState===4){return callback(parseInt(request.getResponseHeader("Content-Length"),10))}};request.onerror=function(e){throw new Error(e)};request.send()};exports.getFilesize=getFilesize;var noOp=function noOp(){};exports.noOp=noOp},{}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sceneManager=exports.eventHandler=exports.eventEmitter=exports.audioManager=exports.assetLoader=exports.animationManager=exports.default=void 0;var _ag2d=_interopRequireWildcard(require("ag2d"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var experience=new _ag2d.default(document.querySelector("canvas"));var animationManager=new _ag2d.AnimationManager;exports.animationManager=animationManager;var assetLoader=new _ag2d.AssetLoader;exports.assetLoader=assetLoader;var audioManager=new _ag2d.AudioManager;exports.audioManager=audioManager;var eventEmitter=new _ag2d.EventEmitter;exports.eventEmitter=eventEmitter;var eventHandler=new _ag2d.EventHandler;exports.eventHandler=eventHandler;var sceneManager=new _ag2d.SceneManager;exports.sceneManager=sceneManager;var update=function update(deltaTime){animationManager.update(deltaTime);sceneManager.update(deltaTime)};var render=function render(){sceneManager.render()};var stop=function stop(){audioManager.suspend();sceneManager.pause()};var start=function start(){audioManager.resume();sceneManager.play()};experience.hooks.bind("update",update);experience.hooks.bind("render",render);experience.hooks.bind("stop",stop);experience.hooks.bind("start",start);var _default=experience;exports.default=_default},{ag2d:1}],14:[function(require,module,exports){"use strict";var _experience=_interopRequireWildcard(require("./experience"));var _SceneMobileInteraction=_interopRequireDefault(require("./scenes/SceneMobileInteraction"));var _SceneLoading=_interopRequireDefault(require("./scenes/SceneLoading"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}_experience.assetLoader.addAssets([{type:"audio",name:"TestAudio",sources:[{type:"audio/ogg",path:"/audio/TestAudio.ogg"},{type:"audio/mpeg",path:"/audio/TestAudio.mp3"}]},{type:"video",name:"TestVideo",sources:[{type:"video/ogg",path:"/video/TestVideo.ogg"},{type:"video/webm",path:"/video/TestVideo.webm"},{type:"video/mp4",path:"/video/TestVideo.mp4"}]}]);_experience.sceneManager.add(new _SceneMobileInteraction.default);_experience.sceneManager.add(new _SceneLoading.default);_experience.default.configure({canvas:document.querySelector("canvas"),fps:60,backgroundColour:"#FF00FF",size:{height:720,width:1280}});_experience.default.resizeCanvas(window.innerWidth,window.innerHeight);window.addEventListener("resize",function(){_experience.default.resizeCanvas(window.innerWidth,window.innerHeight)});_experience.sceneManager.goTo("SceneMobileInteraction");_experience.default.start()},{"./experience":13,"./scenes/SceneLoading":15,"./scenes/SceneMobileInteraction":16}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");var _SceneStart=_interopRequireDefault(require("./SceneStart"));var _SceneOne=_interopRequireDefault(require("./SceneOne"));var _SceneTwo=_interopRequireDefault(require("./SceneTwo"));var _SceneThree=_interopRequireDefault(require("./SceneThree"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneLoading=function(_Scene){_inherits(SceneLoading,_Scene);function SceneLoading(){_classCallCheck(this,SceneLoading);return _possibleConstructorReturn(this,_getPrototypeOf(SceneLoading).call(this,"SceneLoading"))}_createClass(SceneLoading,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FFFF00";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText("Please wait, we are loading...",_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText("Please wait, we are loading...",_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){if(this.enterCount===0){_experience.eventEmitter.addListener("assetLoader:loaded",function(){Object.keys(_experience.assetLoader.assets).forEach(function(asset){var currentAsset=_experience.assetLoader.assets[asset];if(currentAsset.type==="video"){currentAsset.element.setAttribute("playsinline",true);currentAsset.element.setAttribute("webkit-playsinline",true)}});_experience.audioManager.add(_experience.assetLoader.assets.TestAudio);_experience.sceneManager.add(new _SceneStart.default);_experience.sceneManager.add(new _SceneOne.default);_experience.sceneManager.add(new _SceneTwo.default);_experience.sceneManager.add(new _SceneThree.default);_experience.sceneManager.goTo("SceneStart")},1);_experience.assetLoader.loadAssets(function(){_experience.eventEmitter.emit("assetLoader:loaded")})}}}]);return SceneLoading}(_ag2d.Scene);var _default=SceneLoading;exports.default=_default},{"../experience":13,"./SceneOne":17,"./SceneStart":18,"./SceneThree":19,"./SceneTwo":20,ag2d:1}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneMobileInteraction=function(_Scene){_inherits(SceneMobileInteraction,_Scene);function SceneMobileInteraction(){_classCallCheck(this,SceneMobileInteraction);return _possibleConstructorReturn(this,_getPrototypeOf(SceneMobileInteraction).call(this,"SceneMobileInteraction"))}_createClass(SceneMobileInteraction,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FF0000";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText("Tap to start",_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText("Tap to start",_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){if(this.enterCount===0){_experience.eventEmitter.addListener("audioManager:context ready",function(){document.querySelector("#start").addEventListener("click",function(){_experience.default.start()});document.querySelector("#stop").addEventListener("click",function(){_experience.default.stop()});document.querySelector("#restart").addEventListener("click",function(){_experience.sceneManager.goTo("SceneStart");_experience.default.start()});_experience.sceneManager.goTo("SceneLoading")},1);_experience.audioManager.init(function(){_experience.eventEmitter.emit("audioManager:context ready")})}}}]);return SceneMobileInteraction}(_ag2d.Scene);var _default=SceneMobileInteraction;exports.default=_default},{"../experience":13,ag2d:1}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneOne=function(_Scene){_inherits(SceneOne,_Scene);function SceneOne(){var _this2;_classCallCheck(this,SceneOne);_this2=_possibleConstructorReturn(this,_getPrototypeOf(SceneOne).call(this,"SceneOne"));_this2.video=_experience.assetLoader.assets.TestVideo;return _this2}_createClass(SceneOne,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FF0000";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.drawImage(this.video.element,0,0);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText(this.name,_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText(this.name,_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){var _this=this;this.video.element.addEventListener("ended",function nextScene(){_this.video.element.removeEventListener("ended",nextScene,false);_experience.sceneManager.next()});this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneOne}(_ag2d.Scene);var _default=SceneOne;exports.default=_default},{"../experience":13,ag2d:1}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneStart=function(_Scene){_inherits(SceneStart,_Scene);function SceneStart(){_classCallCheck(this,SceneStart);return _possibleConstructorReturn(this,_getPrototypeOf(SceneStart).call(this,"SceneStart"))}_createClass(SceneStart,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FF0000";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText("Click to start",_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText("Click to start",_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){_experience.eventHandler.addEvent({name:"SceneStartInteraction",element:_experience.default.canvas,type:"click",function:function _function(){_experience.sceneManager.next()}})}},{key:"exit",value:function exit(){_experience.eventHandler.removeEvent("SceneStartInteraction")}}]);return SceneStart}(_ag2d.Scene);var _default=SceneStart;exports.default=_default},{"../experience":13,ag2d:1}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneThree=function(_Scene){_inherits(SceneThree,_Scene);function SceneThree(){var _this;_classCallCheck(this,SceneThree);_this=_possibleConstructorReturn(this,_getPrototypeOf(SceneThree).call(this,"SceneThree"));_this.video=_experience.assetLoader.assets.TestVideo;return _this}_createClass(SceneThree,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FF0000";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.drawImage(this.video.element,0,0);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText(this.name,_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText(this.name,_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneThree}(_ag2d.Scene);var _default=SceneThree;exports.default=_default},{"../experience":13,ag2d:1}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _experience=_interopRequireWildcard(require("../experience"));var _ag2d=require("ag2d");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SceneTwo=function(_Scene){_inherits(SceneTwo,_Scene);function SceneTwo(){var _this2;_classCallCheck(this,SceneTwo);_this2=_possibleConstructorReturn(this,_getPrototypeOf(SceneTwo).call(this,"SceneTwo"));_this2.video=_experience.assetLoader.assets.TestVideo;return _this2}_createClass(SceneTwo,[{key:"render",value:function render(){_experience.default.context.fillStyle="#FF0000";_experience.default.context.fillRect(0,0,_experience.default.size.width,_experience.default.size.height);_experience.default.context.drawImage(this.video.element,0,0);_experience.default.context.textAlign="center";_experience.default.context.textBaseline="middle";_experience.default.context.font="40px sans-serif";_experience.default.context.strokeStyle="black";_experience.default.context.lineWidth=4;_experience.default.context.lineJoin="round";_experience.default.context.strokeText(this.name,_experience.default.size.width/2,_experience.default.size.height/2);_experience.default.context.fillStyle="white";_experience.default.context.fillText(this.name,_experience.default.size.width/2,_experience.default.size.height/2)}},{key:"enter",value:function enter(){var _this=this;this.video.element.addEventListener("ended",function nextScene(){_this.video.element.removeEventListener("ended",nextScene,false);_experience.sceneManager.next()});this.video.element.currentTime=0;this.video.element.play();_experience.audioManager.play("TestAudio")}},{key:"exit",value:function exit(){this.video.element.pause();this.video.element.currentTime=0;_experience.audioManager.stop("TestAudio")}},{key:"play",value:function play(){this.video.element.play()}},{key:"pause",value:function pause(){this.video.element.pause()}}]);return SceneTwo}(_ag2d.Scene);var _default=SceneTwo;exports.default=_default},{"../experience":13,ag2d:1}]},{},[14]);